{"version":3,"file":"report-settings.js","sourceRoot":"","sources":["../../../src/components/report-settings/report-settings.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Component, Host, Event, EventEmitter, Prop, State, h, Watch } from '@stencil/core';\nimport { TranslateService } from '../../services/translate.service';\nimport { getUserContent } from \"@esri/arcgis-rest-portal\";\nimport { UtilService } from '../../services/util.service';\nimport { ReportService } from '../../services/report.service';\nimport { StateService } from '../../services/state.service';\n\n@Component({\n  tag: 'report-settings',\n  styleUrl: 'report-settings.scss',\n  shadow: true,\n})\nexport class ReportSettings {\n  @Prop() mergeFiles: 'none' | 'nextPage' | 'continuous';\n  @Prop() outputFormat: string = 'word';\n  @Prop() conflictBehavior: 'rename' | 'replace' | 'fail' = 'rename'; \n\n  // @Prop() langObj: any;\n  @Prop() fileName: string;\n  @Watch('fileName')\n  onFileNameChange() {\n    this.fileNameChangeHandler({\n      target: {\n        value: this.fileName\n      }\n    })\n  }\n\n\n  @Prop() visibleElems: string[] = [];\n  @Event() fileOptionChange: EventEmitter<any>;\n  @Event() fileNameChange: EventEmitter<any>;\n  @Event() selectedFolderChange: EventEmitter<any>;\n  @Event() selectedFileFormatChange: EventEmitter<any>;\n  \n  private folders: any[];\n  private selectedFolder: any;\n  // private langCommon: any;\n  @State() translator: any;\n  @State() langReport: any;\n  @State() helperObj: any;\n  @State() featureCount: number;\n  @State() printTemplates: any[] = [];\n  private reportService: ReportService = ReportService.getService();\n  private state: StateService = StateService.getService();\n\n  componentWillLoad() {\n    return Promise.resolve(true)\n    // .then(() => {\n    //   return TranslateService.getService().getTranslate();\n    // })\n    .then(() => {\n      const res = TranslateService.getService().getTranslateSync();\n      this.translator = res;\n      this.langReport = res?.customPrint;\n      this.state.subscribe('locale-data-changed', (data) => {\n        this.translator = data;\n        this.langReport = data?.customPrint;\n      });\n      // this.langCommon = res.common;\n      this.printTemplates = this.reportService.getHelperObj('printTemplates') || [];\n      this.state.subscribe('print-templates-updated', (data) => {\n        this.printTemplates = data || [];\n      });\n      this.helperObj = this.reportService.getHelperObj();\n      this.featureCount = this.reportService.getHelperObj('featureCount') || 0;\n      this.state.subscribe('portal-info-update', () => {\n        this.featureCount = this.reportService.getHelperObj('featureCount') || 0;\n      });\n      this.state.subscribe('feature-count-updated', () => {\n        this.featureCount = this.reportService.getHelperObj('featureCount') || 0;\n      });\n\n      return this.getUserFolders();\n    }).catch((err) => {\n      this.reportService.showError(err);\n    })\n  }\n\n  /**\n   * merge mode change: 'none' | 'nextPage' | 'continuous'\n   * @param evt \n   */\n  public fileOptChangeHandler(evt) {\n    const cachedParam = this.reportService.getParamCache();\n    if (evt.detail !== 'split') {\n      cachedParam.mergeFiles = evt.detail;\n    } else {\n      delete cachedParam.mergeFiles;\n    }\n\n    this.fileOptionChange.emit(evt.detail);\n  }\n\n  /**\n   * file name change handler\n   * @param evt \n   */\n  public fileNameChangeHandler(evt) {\n    this.fileName = evt.target.value;\n    const outputReportName = this.fileName;\n\n    // Use outputReportName as outputPackageName if it doesn't have any variables and outputPackageName is not specified by user\n    // https://devtopia.esri.com/Beijing-R-D-Center/feature-report/issues/252\n    if (outputReportName) {\n      const placeholders = this.extractPlaceholders(outputReportName);\n      if (!(placeholders && placeholders.length)) {\n        this.reportService.setParamCache({\n          outputPackageName: outputReportName\n        });\n      }\n    }\n\n    this.reportService.setParamCache({\n      outputReportName: outputReportName\n    });\n    this.fileNameChange.emit(this.fileName);\n  }\n\n  /**\n   * selected folder changed\n   * @param evt \n   */\n  public selectedFolderChangeHandler() {\n    const uploadInfo = this.reportService.getParamCache('uploadInfo') || {\n      type: 'arcgis', // 'ArcGIS Online',\n      parameters: {\n      },\n      conflictBehavior: 'rename'\n    };\n    uploadInfo.parameters.folderId = this.selectedFolder.id === 'all' ? '' : this.selectedFolder.id;\n    this.reportService.setParamCache({\n      uploadInfo: uploadInfo\n    });\n\n    this.selectedFolderChange.emit(this.selectedFolder);\n  }\n  /**\n   * selected format handlder\n   * @param evt \n   */\n  public outputFormatChangeHandler(evt) {\n    this.outputFormat = evt.target.value;\n    this.reportService.setParamCache({\n      outputFormat: this.outputFormat\n    });\n    this.selectedFileFormatChange.emit(this.outputFormat)\n  }\n\n\n  /**\n   * get user folders\n   * @returns \n   */\n  public getUserFolders() {\n    const utilService: UtilService = UtilService.getService();\n    const userName = utilService.getUser()?.username;\n    const rootFolderStr = this.langReport?.saveToAGOFolderRoot.replace('${$username}', userName)\n    const params = Object.assign({owner: userName}, utilService.getBaseRequestOptions());\n    return getUserContent(params).then((res) => {\n      this.folders = [];\n      const folders = [];\n      // add root folder\n      folders.push({\n        username: userName,\n        id: 'all',\n        value: 'all',\n        title: rootFolderStr, // todo: use i18n string\n        label: rootFolderStr,\n        created: null\n      });\n      if (res && res.folders && res.folders.length) {\n        res.folders.forEach((folder) => {\n          folder['label'] = folder.title;\n          folder['value'] = folder.id;\n        });\n        this.folders = folders.concat(res.folders);\n      } else {\n        this.folders = folders;\n      }\n        // if the folder name is the same as the survey title, set it as the default folder\n      // this.selectedFolder = this.folders.find((fd) => {\n      //   return fd.title === 'Survey-' + this.survey.title;\n      // }) || this.folders[0];\n      this.selectedFolder =  this.folders[0];\n      return this.folders;\n    });\n  }\n\n    // remove placeholders in output file name expression\n  public extractPlaceholders(exp: string) {\n    exp = exp || '';\n\n    const matches = exp.match(/\\$[^{$]*?{[^}]*?.*?}/g),\n      returnedMatches = [];\n    if (matches) {\n      matches.forEach((match) => {\n        // if not duplicate, push it\n        if (returnedMatches.indexOf(match) === -1) {\n          returnedMatches.push(match);\n        }\n      });\n    }\n    return returnedMatches;\n  }\n\n  /**\n   * confilict behavior changed.\n   * @param evt \n   */\n  public changeConflictBehavior(evt) {\n    this.conflictBehavior = evt.target.value;\n    const uploadInfo = this.reportService.getParamCache('uploadInfo') || {\n      type: 'arcgis',\n      parameters: {\n      },\n      conflictBehavior: 'rename'\n    };\n    uploadInfo.conflictBehavior = this.conflictBehavior;\n    this.reportService.setParamCache({\n      uploadInfo: uploadInfo\n    });\n  }\n\n\n  render() {\n    return (\n      <Host>\n        <div class=\"heading\">\n          {this.translator?.customPrint?.resultSettingsLabel1}\n        </div>\n        {this.visibleElems.indexOf('fileOptions') < 0 ?\n          null : <file-option-chooser fileOption={this.mergeFiles} onFileOptionChange={(evt) =>{this.fileOptChangeHandler(evt)}}></file-option-chooser>\n        }\n        \n\n        {/* report name */}\n        {this.visibleElems.indexOf('reportName') < 0 ?\n          null : \n          <calcite-label>\n            {this.translator?.customPrint?.saveToAGOItemName}\n            <calcite-input-text placeholder={this.translator?.customPrint?.saveToAGOItemName} value={this.fileName} onCalciteInputTextChange={(evt) => this.fileNameChangeHandler(evt)}></calcite-input-text>\n          </calcite-label>\n        }\n\n        {this.visibleElems.indexOf('saveToAGSAccount') < 0 ? null :\n          <calcite-label>\n            <div class=\"folder-label\">\n              <span>{this.translator?.customPrint?.saveToAGOFolder}</span>\n              <calcite-dropdown width=\"l\" scale=\"m\" close-on-select-disabled type=\"click\" width-scale=\"l\">\n                <calcite-button slot=\"trigger\" icon-start=\"gear\" appearance=\"transparent\"></calcite-button>\n                <calcite-dropdown-group>\n                  <div class=\"conflict-name-setting\">   \n                     {/* there are two bugs in the  calcite-radio-button-group component: 1. the disabled attribute won't work when changing it dyanamically. 2. the onCalciteRadioButtonGroupChange event won't return value              */}\n                    <calcite-radio-button-group name=\"conflict-name-options\" layout=\"vertical\">\n                        <calcite-label layout=\"inline\">\n                        {this.translator?.customPrint?.nameConflictOptLabel}        \n                          <calcite-icon id=\"info-icon\" icon=\"question\" scale=\"s\"> </calcite-icon>\n                          <calcite-tooltip label={this.translator?.customPrint?.nameConflictOptLabel} reference-element=\"info-icon\">\n                              <span>{this.translator?.customPrint?.nameConflictOptLabel}</span>\n                          </calcite-tooltip>\n                        </calcite-label>\n                        <calcite-label layout=\"inline\">\n                            <calcite-radio-button value=\"rename\" checked={this.conflictBehavior=='rename'} onCalciteRadioButtonChange={(evt) => this.changeConflictBehavior(evt)}></calcite-radio-button>\n                            {this.translator?.customPrint?.nameConflictOptRename}\n                        </calcite-label>\n                        <calcite-label layout=\"inline\">\n                            <calcite-radio-button value=\"replace\" checked={this.conflictBehavior=='replace'} onCalciteRadioButtonChange={(evt) => this.changeConflictBehavior(evt)}></calcite-radio-button>\n                            {this.translator?.customPrint?.nameConflictOptReplace}\n                        </calcite-label>\n                        <calcite-label layout=\"inline\">\n                            <calcite-radio-button value=\"fail\" checked={this.conflictBehavior=='fail'} onCalciteRadioButtonChange={(evt) => this.changeConflictBehavior(evt)}></calcite-radio-button>\n                            {this.translator?.customPrint?.nameConflictOptSkip}\n                        </calcite-label>\n                    </calcite-radio-button-group>\n                  </div>\n                </calcite-dropdown-group>\n          </calcite-dropdown>\n            </div>\n            {/* todo: add a tooltip: saveToAGOItemNameTip_i18n */}\n            <calcite-tooltip label={this.helperObj.canCreateItem === false ? this.langReport.saveToAGONoCreatePrivilegeTip : ''} reference-element=\"folder-selector\">\n              <span>{this.helperObj.canCreateItem === false ? this.langReport.saveToAGONoCreatePrivilegeTip : ''}</span>\n            </calcite-tooltip>\n            <calcite-combobox id=\"folder-selector\" disabled={this.helperObj.canCreateItem === false} placeholder={this.translator?.customPrint?.saveToAGOFolder} selection-mode=\"single-persist\" clearDisabled=\"true\" maxItems=\"7\" value={this.selectedFolder} onCalciteComboboxChange={() => {this.selectedFolderChangeHandler()}}>\n              {(this.folders || []).map((folder) => {\n                return <calcite-combobox-item value={folder.value} text-label={folder.label} selected={folder.value===this.selectedFolder?.id}></calcite-combobox-item>;\n              })}\n            </calcite-combobox>\n          </calcite-label>\n        }\n\n        {this.visibleElems.indexOf('outputFormat') < 0 ? null :\n          <calcite-label>\n            {this.translator?.customPrint?.outputFormat}\n            <calcite-combobox placeholder={this.translator?.customPrint?.outputFormat} selection-mode=\"single-persist\" clearDisabled=\"true\" value={this.outputFormat} onCalciteComboboxChange={(evt) => this.outputFormatChangeHandler(evt)}>\n              <calcite-combobox-item value='docx' selected={this.outputFormat==='docx'} text-label={this.translator?.customPrint?.outputFormatDocx}></calcite-combobox-item>\n              <calcite-combobox-item value='pdf' selected={this.outputFormat==='pdf'} text-label={this.translator?.customPrint?.outputFormatPdf}></calcite-combobox-item>\n            </calcite-combobox>\n          </calcite-label>\n        }\n\n        <slot></slot>\n      </Host>\n    );\n  }\n\n}\n"]}