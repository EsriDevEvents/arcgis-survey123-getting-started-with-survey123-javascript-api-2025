import{g as t}from"./p-13c60fff.js";class e{static setProps(t){const r=e.paramesWhitelist;let s="";const o=/survey123(.*?).arcgis.com/;const a=window.location.hostname.match(o);if(a&&a[1]){if(["dev","qa","beta"].includes(a[1])){s=a[1]}}const n=this.getLocale();const i={apiUrl:`https://survey123${s}.arcgis.com/api/featureReport`,itemId:null,token:null,outputFormat:"docx",portalUrl:"https://www.arcgis.com",locale:n,f:"json"};if(typeof t==="object"){for(let s in t){if(r.indexOf(s)>=0){e[s]=t[s]||i[s]||t[s];if(s==="locale"&&t[s]){e[s]=this.convertToSupportedLang(t[s])}}}}if(e.outputFormat!=="docx"&&e.outputFormat!=="pdf"){e.outputFormat="docx"}}static getLocale(t){t=Object.assign({},t||{});let e=t.userInfo||{};let r=t.portalInfo||{};const s=navigator.language||navigator.userLanguage;return this.convertToSupportedLang(t.userDefinedLocale)||this.convertToSupportedLang(e.culture)||this.convertToSupportedLang(r.culture)||this.convertToSupportedLang(s)||"en"}static convertToSupportedLang(t){const e=["ar","bg","bs","ca","cs","da","de","el","en","es","et","fi","fr","he","hr","hu","id","it","ja","ko","lt","lv","nb","nl","pl","pt-br","pt-pt","ro","ru","sk","sl","sr","sv","th","tr","uk","vi","zh-cn","zh-hk","zh-tw"];const r=["en-US","en-GB","en-AU","en-CA","es-ES","es-MX","it-CH","de-CH","de-AT","fr-CH"];t=t||"";t=(t+"").toLowerCase();const s=e.find((e=>e.toLowerCase()===t||e.toLowerCase()===t.split("-")[0]||e.toLowerCase().split("-")[0]===t));const o=r.find((e=>e.toLowerCase()===t));return o||s}}e.paramesWhitelist=["token","portalUrl","apiUrl","featureLayerUrl","surveyItemId","templateItemId","queryParameters","mergeFiles","outputFormat","outputReportName","outputPackageName","packageFiles","uploadInfo","webmapItemId","mapScale","locale","utcOffset","where","username","show","hide","inputFeatureTemplate","label","reportTemplateIds","clientId","requestSource"];const r="en";const s=["ar","bg","bs","ca","cs","da","de","el",r,"es","et","fi","fr","he","hr","hu","id","it","ja","ko","lt","lv","no","nl","pl","pt-br","pt-pt","ro","ru","sk","sl","sr","sv","th","tr","uk","vi","zh-cn","zh-hk","zh-tw"];class o{static getService(){if(!this.service){this.service=new o}return this.service}getTranslate(){const r=this.getSupportedLocale(e.locale||"en");return Promise.resolve(true).then((()=>{if(this.cache&&this.cache[r]){try{return JSON.parse(this.cache[r])}catch(t){return null}}})).then((e=>{if(e){return e}return fetch(t(`./assets/i18n/${r}.json`)).then((t=>{if(!t.ok){throw new Error("could not fetch the translate json file")}return t.json()}))})).then((t=>{if(t){this.cache=this.cache||{};if(!this.cache[r]){try{this.cache[r]=JSON.stringify(t)}catch(t){}}if(e.label){const r={inputFeatures:"inputFeatures",selectTemplate:"chooseTemplateLabel1",reportSetting:"resultSettingsLabel1",fileOptions:"outputMode",reportName:"saveToAGOItemName",saveToAGSAccount:"saveToAGOFolder",outputFormat:"outputFormat",showCredits:"creditsEstimate",generateReport:"generate",previewMode:"previewReport"};const s=JSON.parse(e.label);Object.keys(s).forEach((e=>{const o=s[e];if(e==="recentReports"){t.customPrint.recentTasks.label=o}const a=r[e];if(["inputFeatures","selectTemplate","reportSetting","fileOptions","reportName","saveToAGSAccount","outputFormat","showCredits","generateReport","previewReport"].indexOf(e)>=0){t.customPrint[a]=o}}))}o.currentLangObj=t}return t})).catch((t=>{throw new Error(t)}))}getTranslateSync(){return o.currentLangObj}getSupportedLocale(t){const e=s;if(!t){return r}if(e.includes(t)){return t}t=t.toLowerCase();if(t==="nb"){return"no"}if(t==="pt"){return"pt-br"}if(t.includes("-")){t=t.replace(/(\w+)-(\w+)/,((t,e,r)=>`${e}-${r.toUpperCase()}`));if(!e.includes(t)){t=t.split("-")[0]}}if(t==="zh"){return"zh-cn"}if(!e.includes(t)){console.warn(`Translations for the "${t}" locale are not available and will fall back to the default, English (en).`);return r}return t}}export{e as P,o as T};
//# sourceMappingURL=p-33b03442.js.map