function t(t){return typeof t==="function"}function i(t){const i=t=>{Error.call(t);t.stack=(new Error).stack};const e=t(i);e.prototype=Object.create(Error.prototype);e.prototype.constructor=e;return e}const e=i((t=>function i(e){t(this);this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map(((t,i)=>`${i+1}) ${t.toString()}`)).join("\n  ")}`:"";this.name="UnsubscriptionError";this.errors=e}));function s(t,i){if(t){const e=t.indexOf(i);0<=e&&t.splice(e,1)}}class n{constructor(t){this.initialTeardown=t;this.closed=false;this._parentage=null;this._finalizers=null}unsubscribe(){let i;if(!this.closed){this.closed=true;const{_parentage:s}=this;if(s){this._parentage=null;if(Array.isArray(s)){for(const t of s){t.remove(this)}}else{s.remove(this)}}const{initialTeardown:n}=this;if(t(n)){try{n()}catch(t){i=t instanceof e?t.errors:[t]}}const{_finalizers:r}=this;if(r){this._finalizers=null;for(const t of r){try{u(t)}catch(t){i=i!==null&&i!==void 0?i:[];if(t instanceof e){i=[...i,...t.errors]}else{i.push(t)}}}}if(i){throw new e(i)}}}add(t){var i;if(t&&t!==this){if(this.closed){u(t)}else{if(t instanceof n){if(t.closed||t._hasParent(this)){return}t._addParent(this)}(this._finalizers=(i=this._finalizers)!==null&&i!==void 0?i:[]).push(t)}}}_hasParent(t){const{_parentage:i}=this;return i===t||Array.isArray(i)&&i.includes(t)}_addParent(t){const{_parentage:i}=this;this._parentage=Array.isArray(i)?(i.push(t),i):i?[i,t]:t}_removeParent(t){const{_parentage:i}=this;if(i===t){this._parentage=null}else if(Array.isArray(i)){s(i,t)}}remove(t){const{_finalizers:i}=this;i&&s(i,t);if(t instanceof n){t._removeParent(this)}}}n.EMPTY=(()=>{const t=new n;t.closed=true;return t})();const r=n.EMPTY;function o(i){return i instanceof n||i&&"closed"in i&&t(i.remove)&&t(i.add)&&t(i.unsubscribe)}function u(i){if(t(i)){i()}else{i.unsubscribe()}}const c={onUnhandledError:null,onStoppedNotification:null,Promise:undefined,useDeprecatedSynchronousErrorHandling:false,useDeprecatedNextContext:false};const h={setTimeout(t,i,...e){const{delegate:s}=h;if(s===null||s===void 0?void 0:s.setTimeout){return s.setTimeout(t,i,...e)}return setTimeout(t,i,...e)},clearTimeout(t){const{delegate:i}=h;return((i===null||i===void 0?void 0:i.clearTimeout)||clearTimeout)(t)},delegate:undefined};function l(t){h.setTimeout((()=>{const{onUnhandledError:i}=c;if(i){i(t)}else{throw t}}))}function f(){}const a=(()=>b("C",undefined,undefined))();function d(t){return b("E",undefined,t)}function v(t){return b("N",t,undefined)}function b(t,i,e){return{kind:t,value:i,error:e}}let p=null;function w(t){if(c.useDeprecatedSynchronousErrorHandling){const i=!p;if(i){p={errorThrown:false,error:null}}t();if(i){const{errorThrown:t,error:i}=p;p=null;if(t){throw i}}}else{t()}}class y extends n{constructor(t){super();this.isStopped=false;if(t){this.destination=t;if(o(t)){t.add(this)}}else{this.destination=T}}static create(t,i,e){return new E(t,i,e)}next(t){if(this.isStopped){O(v(t),this)}else{this._next(t)}}error(t){if(this.isStopped){O(d(t),this)}else{this.isStopped=true;this._error(t)}}complete(){if(this.isStopped){O(a,this)}else{this.isStopped=true;this._complete()}}unsubscribe(){if(!this.closed){this.isStopped=true;super.unsubscribe();this.destination=null}}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const m=Function.prototype.bind;function _(t,i){return m.call(t,i)}class x{constructor(t){this.partialObserver=t}next(t){const{partialObserver:i}=this;if(i.next){try{i.next(t)}catch(t){S(t)}}}error(t){const{partialObserver:i}=this;if(i.error){try{i.error(t)}catch(t){S(t)}}else{S(t)}}complete(){const{partialObserver:t}=this;if(t.complete){try{t.complete()}catch(t){S(t)}}}}class E extends y{constructor(i,e,s){super();let n;if(t(i)||!i){n={next:i!==null&&i!==void 0?i:undefined,error:e!==null&&e!==void 0?e:undefined,complete:s!==null&&s!==void 0?s:undefined}}else{let t;if(this&&c.useDeprecatedNextContext){t=Object.create(i);t.unsubscribe=()=>this.unsubscribe();n={next:i.next&&_(i.next,t),error:i.error&&_(i.error,t),complete:i.complete&&_(i.complete,t)}}else{n=i}}this.destination=new x(n)}}function S(t){{l(t)}}function g(t){throw t}function O(t,i){const{onStoppedNotification:e}=c;e&&h.setTimeout((()=>e(t,i)))}const T={closed:true,next:f,error:g,complete:f};const j=(()=>typeof Symbol==="function"&&Symbol.observable||"@@observable")();function P(t){return t}function A(t){if(t.length===0){return P}if(t.length===1){return t[0]}return function i(e){return t.reduce(((t,i)=>i(t)),e)}}class C{constructor(t){if(t){this._subscribe=t}}lift(t){const i=new C;i.source=this;i.operator=t;return i}subscribe(t,i,e){const s=U(t)?t:new E(t,i,e);w((()=>{const{operator:t,source:i}=this;s.add(t?t.call(s,i):i?this._subscribe(s):this._trySubscribe(s))}));return s}_trySubscribe(t){try{return this._subscribe(t)}catch(i){t.error(i)}}forEach(t,i){i=N(i);return new i(((i,e)=>{const s=new E({next:i=>{try{t(i)}catch(t){e(t);s.unsubscribe()}},error:e,complete:i});this.subscribe(s)}))}_subscribe(t){var i;return(i=this.source)===null||i===void 0?void 0:i.subscribe(t)}[j](){return this}pipe(...t){return A(t)(this)}toPromise(t){t=N(t);return new t(((t,i)=>{let e;this.subscribe((t=>e=t),(t=>i(t)),(()=>t(e)))}))}}C.create=t=>new C(t);function N(t){var i;return(i=t!==null&&t!==void 0?t:c.Promise)!==null&&i!==void 0?i:Promise}function D(i){return i&&t(i.next)&&t(i.error)&&t(i.complete)}function U(t){return t&&t instanceof y||D(t)&&o(t)}const $=i((t=>function i(){t(this);this.name="ObjectUnsubscribedError";this.message="object unsubscribed"}));class z extends C{constructor(){super();this.closed=false;this.currentObservers=null;this.observers=[];this.isStopped=false;this.hasError=false;this.thrownError=null}lift(t){const i=new k(this,this);i.operator=t;return i}_throwIfClosed(){if(this.closed){throw new $}}next(t){w((()=>{this._throwIfClosed();if(!this.isStopped){if(!this.currentObservers){this.currentObservers=Array.from(this.observers)}for(const i of this.currentObservers){i.next(t)}}}))}error(t){w((()=>{this._throwIfClosed();if(!this.isStopped){this.hasError=this.isStopped=true;this.thrownError=t;const{observers:i}=this;while(i.length){i.shift().error(t)}}}))}complete(){w((()=>{this._throwIfClosed();if(!this.isStopped){this.isStopped=true;const{observers:t}=this;while(t.length){t.shift().complete()}}}))}unsubscribe(){this.isStopped=this.closed=true;this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){this._throwIfClosed();return super._trySubscribe(t)}_subscribe(t){this._throwIfClosed();this._checkFinalizedStatuses(t);return this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:i,isStopped:e,observers:o}=this;if(i||e){return r}this.currentObservers=null;o.push(t);return new n((()=>{this.currentObservers=null;s(o,t)}))}_checkFinalizedStatuses(t){const{hasError:i,thrownError:e,isStopped:s}=this;if(i){t.error(e)}else if(s){t.complete()}}asObservable(){const t=new C;t.source=this;return t}}z.create=(t,i)=>new k(t,i);class k extends z{constructor(t,i){super();this.destination=t;this.source=i}next(t){var i,e;(e=(i=this.destination)===null||i===void 0?void 0:i.next)===null||e===void 0?void 0:e.call(i,t)}error(t){var i,e;(e=(i=this.destination)===null||i===void 0?void 0:i.error)===null||e===void 0?void 0:e.call(i,t)}complete(){var t,i;(i=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||i===void 0?void 0:i.call(t)}_subscribe(t){var i,e;return(e=(i=this.source)===null||i===void 0?void 0:i.subscribe(t))!==null&&e!==void 0?e:r}}class F{static getService(){if(!F.instance){F.instance=new F}return F.instance}constructor(){this._data=new z;this._dataStream$=this._data.asObservable();this._subscriptions=new Map;this._dataStream$.subscribe((t=>this._onEvent(t)))}notifyDataChanged(t,i){i=Object.assign({value:null,ignoreSameValueEvent:false},i||{});const e=this._data[t];if(i.ignoreSameValueEvent&&e!==i.value){return}this._data[t]=i.value;this._data.next({event:t,data:this._data[t]})}notifyDataChangedByName(t,i){if(this._subscriptions.size>0){const e=this._subscriptions.keys();let s=e.next();while(!s.done){if(s.value.indexOf(t)!==-1){this.notifyDataChanged(s.value,i)}s=e.next()}}}subscribe(t,i){const e=this._subscriptions.get(t)||[];e.push(i);this._subscriptions.set(t,e);const s={};if(t){s[t]=i}return s}unSubscribe(t){if(!t){return}for(const i in t){if(Object.prototype.hasOwnProperty.call(t,i)){if(i&&i.length){const e=this._subscriptions.get(i)||[];const s=t[i];for(let t=0;t<e.length;t++){if(s===e[t]){e.splice(t,1)}}this._subscriptions.set(i,e);if(e.length===0){this._subscriptions.delete(i)}}return}}}_onEvent(t){const i=this._subscriptions.get(t["event"])||[];i.forEach((i=>{i.call(null,t["data"])}))}}export{F as S};
//# sourceMappingURL=p-b681d68c.js.map