{"file":"detail-table2.js","mappings":"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","names":[],"sources":["src/components/task-list/detail-table/detail-table.scss?tag=detail-table&encapsulation=shadow","src/components/task-list/detail-table/detail-table.tsx"],"sourcesContent":[":host {\n  display: block;\n  calcite-table {\n    width: 100%;\n  }\n  calcite-table-cell {\n    .max-tow-lines {\n      word-wrap: break-word;\n      overflow: hidden;\n      text-overflow: ellipsis;\n      display: -webkit-box;\n      -webkit-box-orient: vertical;\n      -webkit-line-clamp: 2;\n      max-height: 40px;\n      margin-bottom: 5px;\n    }\n    .more-details{\n      margin-bottom: 0px;\n      text-decoration: underline;\n      cursor: pointer;\n    }\n\n  }\n  table {\n    width: 100%;\n    margin-bottom: 0px;\n    tr {\n      border-top: 1px solid #EFF0F5;\n      &:nth-child(2n+1) {\n        background-color: #F9FBFE;\n      }\n      td {\n        border: none;\n        padding: 6px 5px;\n        >div {\n          // max-width: 300px;\n          word-wrap: break-word;\n        }\n\n        .max-tow-lines {\n          word-wrap: break-word;\n          overflow: hidden;\n          text-overflow: ellipsis;\n          display: -webkit-box;\n          -webkit-box-orient: vertical;\n          -webkit-line-clamp: 2;\n          max-height: 40px;\n          margin-bottom: 5px;\n        }\n        .more-details{\n          margin-bottom: 0px;\n          cursor: pointer;\n        }\n\n        &:first-child {\n          padding-left: 30px;\n          max-width: 120px;\n          vertical-align: top;\n\n          // :host-context(html[dir='rtl']) & {\n          //   padding-right: 30px;\n          //   padding-left: unset;\n          // }\n        }\n\n        a {\n          cursor: pointer;\n          // color: $color-green-forest;\n          text-decoration: underline;\n          // font-weight: $font-weight5;\n        }\n      }\n    }\n  }\n}\n\n:host-context([dir=\"rtl\"]) {\n  table tr td:first-child{\n    padding-right: 30px;\n    padding-left: unset !important;\n  }\n}\n","import { Component, Host, Element, State, Prop, h } from '@stencil/core';\nimport { TranslateService } from '../../../services/translate.service';\nimport { UtilService } from '../../../services/util.service';\n\n@Component({\n  tag: 'detail-table',\n  styleUrl: 'detail-table.scss',\n  shadow: true,\n})\nexport class ReportDetailTable {\n  @Prop() job: any;\n  @State() errorMsg: string;\n  @Element() host: HTMLElement;\n  private langTasks: any;\n\n  public statusI18nConfig: any;\n\n  componentWillLoad() {\n    const utilService: UtilService = UtilService.getService();\n    this.errorMsg = utilService.parseMarkdown(this.job.messages&&this.job.messages.length?this.job.messages.join('<br>'):'');\n    return Promise.resolve(true)\n    // .then(() => {\n    //   return TranslateService.getService().getTranslate();\n    // })\n    .then(() => {\n      const res = TranslateService.getService().getTranslateSync();\n      const langTasks = res?.customPrint?.recentTasks;\n      this.langTasks = langTasks;\n      this.statusI18nConfig = {\n        esriJobWaiting: langTasks.jobStatusWaiting,\n        esriJobSubmitted: langTasks.jobStatusSubmitted,\n        esriJobExecuting: langTasks.jobStatusExecuting,\n        esriJobSucceeded: langTasks.jobStatusSucceeded,\n        esriJobFailed: langTasks.jobStatusFailed,\n        pdfConverting: langTasks.pdfConverting,\n        pdfConverted: langTasks.pdfConverted,\n        dfConvertFailed: langTasks.dfConvertFailed\n      };\n    })\n\n  }\n\n  public getPercentage(p) {\n    const utilService: UtilService = UtilService.getService();\n    return utilService.getPercentage(this.job, p);\n  }\n\n  /**\n   * open the error detailed modal\n   */\n  private errorDetailModalOpen() {\n    const modal = this.host.shadowRoot?.querySelector('.error-modal');\n    (modal as any).open = true;\n  }\n\n  /**\n   * open the success detailed modal\n   */\n  private succeedDetailModalOpen() {\n    const modal = this.host.shadowRoot?.querySelector('.success-modal');\n    (modal as any).open = true;\n  }\n\n\n  render() {\n    return (\n      <Host>\n        <calcite-table caption=\"job details\" striped>\n            <calcite-table-row>\n                <calcite-table-cell>{this.langTasks.detailJobID}</calcite-table-cell>\n                <calcite-table-cell>{this.job.jobId}</calcite-table-cell>\n            </calcite-table-row>\n            <calcite-table-row>\n                <calcite-table-cell>{this.langTasks.detailStatus}</calcite-table-cell>\n                <calcite-table-cell>\n                <div>\n                  <span>{this.statusI18nConfig[this.job.jobStatus]}</span>\n                  {this.job.jobStatus=='esriJobPartialSucceeded'&&this.job.resultInfo.totalCount ? \n                    <span>{this.langTasks.jobStatusPartialSucceeded.replace('${$completedPercent}', `${this.getPercentage(1-this.job.resultInfo.failedObjectIds.length/this.job.resultInfo.totalCount)}`)}\n                    </span>: ''\n                  }\n                </div>\n              </calcite-table-cell>\n            </calcite-table-row>\n            <calcite-table-row>\n                <calcite-table-cell>{this.langTasks.detailStatusMsg}</calcite-table-cell>\n                <calcite-table-cell>\n                  <div innerHTML={this.errorMsg} title={this.errorMsg}>\n                  </div>\n                </calcite-table-cell>\n            </calcite-table-row>\n            <calcite-table-row>\n                <calcite-table-cell>{this.langTasks.detailFailedOIDs} {( this.job.resultInfo&&this.job.resultInfo.failedObjectIds&&this.job.resultInfo.failedObjectIds.length ? ' (' + this.job.resultInfo.failedObjectIds.length + ') ' : '' ) }</calcite-table-cell>\n                <calcite-table-cell>\n                  {this.job.resultInfo&&this.job.resultInfo.failedObjectIds&&this.job.resultInfo.failedObjectIds.length ?\n                    <div>\n                      <p class=\"max-tow-lines\" title={this.job.resultInfo.failedObjectIds.join(',')}>\n                        {this.job.resultInfo.failedObjectIds.join(',')}\n                      </p>\n                        \n                      {this.job.resultInfo.details&&this.job.resultInfo.details.length ? \n                        <p class=\"more-details\">\n                          <a onClick={() => this.errorDetailModalOpen()}>{this.langTasks.detailMoreDetails}</a>\n                        </p> : ''\n                      }\n                  </div>\n                  : ''\n                }\n              </calcite-table-cell>\n            </calcite-table-row>\n            <calcite-table-row>\n                <calcite-table-cell>{this.langTasks.detailSucceededOIDs} {this.job.resultInfo&&this.job.resultInfo.succeededObjectIds&&this.job.resultInfo.succeededObjectIds.length?this.job.resultInfo.succeededObjectIds.length:''}</calcite-table-cell>\n                <calcite-table-cell>\n                  {this.job.resultInfo&&this.job.resultInfo.succeededObjectIds&&this.job.resultInfo.succeededObjectIds.length ? \n                    <div>\n                      <p class=\"max-tow-lines\" title={this.job.resultInfo.succeededObjectIds.join(',')}>\n                        {this.job.resultInfo.succeededObjectIds.join(',')}</p>\n                      <p class=\"more-details\">\n                        <a onClick={() => this.succeedDetailModalOpen()}>{this.langTasks.detailMoreDetails}</a>\n                      </p>\n                    </div>: ''\n                  }\n                </calcite-table-cell>\n            </calcite-table-row>\n        </calcite-table>\n\n        {/* <table class=\"table table-striped\">\n          <tr>\n            <td>{this.langTasks.detailJobID}</td>\n            <td>\n              <div>{this.job.jobId}</div>\n            </td>\n          </tr>\n          <tr>\n            <td>{this.langTasks.detailStatus}</td>\n            <td>\n              <div>\n                <span>{this.statusI18nConfig[this.job.jobStatus]}</span>\n                {this.job.jobStatus=='esriJobPartialSucceeded'&&this.job.resultInfo.totalCount ? \n                  <span>{this.langTasks.jobStatusPartialSucceeded.replace('${$completedPercent}', `${this.getPercentage(1-this.job.resultInfo.failedObjectIds.length/this.job.resultInfo.totalCount)}`)}\n                  </span>: ''\n                }\n              </div>\n            </td>\n          </tr>\n          <tr>\n            <td>{this.langTasks.detailStatusMsg}</td>\n            <td>\n              <div title={this.errorMsg} innerHTML={this.errorMsg}></div>\n            </td>\n          </tr>\n          <tr>\n            <td>\n              {this.langTasks.detailFailedOIDs} {( this.job.resultInfo&&this.job.resultInfo.failedObjectIds&&this.job.resultInfo.failedObjectIds.length ? ' (' + this.job.resultInfo.failedObjectIds.length + ') ' : '' ) }\n            </td>\n            <td>\n              {this.job.resultInfo&&this.job.resultInfo.failedObjectIds&&this.job.resultInfo.failedObjectIds.length ?\n                  <div>\n                    <p class=\"max-tow-lines\" title={this.job.resultInfo.failedObjectIds.join(',')}>\n                      {this.job.resultInfo.failedObjectIds.join(',')}\n                    </p>\n                      \n                    {this.job.resultInfo.details&&this.job.resultInfo.details.length ? \n                      <p class=\"more-details\">\n                        <a onClick={() => this.errorDetailModalOpen()}>{this.langTasks.detailMoreDetails}</a>\n                      </p> : ''\n                    }\n                </div>\n                : ''\n              }\n            </td>\n          </tr>\n          <tr>\n            <td>\n              {this.langTasks.detailSucceededOIDs} {this.job.resultInfo&&this.job.resultInfo.succeededObjectIds&&this.job.resultInfo.succeededObjectIds.length?this.job.resultInfo.succeededObjectIds.length:''}\n            </td>\n            <td>\n            {this.job.resultInfo&&this.job.resultInfo.succeededObjectIds&&this.job.resultInfo.succeededObjectIds.length ? \n              <div>\n                <p class=\"max-tow-lines\" title={this.job.resultInfo.succeededObjectIds.join(',')}>\n                  {this.job.resultInfo.succeededObjectIds.join(',')}</p>\n                <p class=\"more-details\">\n                  <a onClick={() => this.succeedDetailModalOpen()}>{this.langTasks.detailMoreDetails}</a>\n                </p>\n              </div>: ''\n            }\n\n            </td>\n          </tr>\n        </table> */}\n\n\n        <error-detail-modal class=\"error-modal\" job={this.job}></error-detail-modal>\n\n        <success-detail-modal class=\"success-modal\" job={this.job}></success-detail-modal>\n        <slot></slot>\n      </Host>\n    );\n  }\n\n}\n"],"version":3}