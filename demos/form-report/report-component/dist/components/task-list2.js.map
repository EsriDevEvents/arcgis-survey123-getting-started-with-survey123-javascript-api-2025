{"file":"task-list2.js","mappings":";;;;;;;;;;;AAAA,MAAM,WAAW,GAAG,g1BAAg1B,CAAC;AACr2B,uBAAe,WAAW;;MCUb,cAAc;;;;;;QAOlB,qBAAgB,GAAW,EAAE,CAAC;QAE7B,kBAAa,GAAkB,aAAa,CAAC,UAAU,EAAE,CAAC;QAC1D,iBAAY,GAAiB,YAAY,CAAC,UAAU,EAAE,CAAC;QACvD,gBAAW,GAAgB,WAAW,CAAC,UAAU,EAAE,CAAC;;;;qBANtB,SAAS;;;IAQ/C,iBAAiB;QACf,IAAI,CAAC,KAAK,GAAG,SAAS,CAAC;QACvB,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC;;;;aAIpB,IAAI,CAAC;;YACJ,MAAM,GAAG,GAAG,gBAAgB,CAAC,UAAU,EAAE,CAAC,gBAAgB,EAAE,CAAC;YAC7D,IAAI,CAAC,UAAU,GAAG,GAAG,aAAH,GAAG,uBAAH,GAAG,CAAE,WAAW,CAAC;YACnC,IAAI,CAAC,UAAU,GAAG,GAAG,aAAH,GAAG,uBAAH,GAAG,CAAE,MAAM,CAAC;YAC9B,IAAI,CAAC,SAAS,GAAG,GAAG,aAAH,GAAG,uBAAH,GAAG,CAAE,WAAW,CAAC,WAAW,CAAC;YAC9C,IAAI,CAAC,YAAY,CAAC,SAAS,CAAC,qBAAqB,EAAE,CAAC,IAAI;gBACtD,IAAI,CAAC,UAAU,GAAG,IAAI,aAAJ,IAAI,uBAAJ,IAAI,CAAE,WAAW,CAAC;gBACpC,IAAI,CAAC,UAAU,GAAG,IAAI,aAAJ,IAAI,uBAAJ,IAAI,CAAE,MAAM,CAAC;gBAC/B,IAAI,CAAC,SAAS,GAAG,IAAI,aAAJ,IAAI,uBAAJ,IAAI,CAAE,WAAW,CAAC,WAAW,CAAC;aAChD,CAAC,CAAC;YACH,IAAI,MAAA,IAAI,CAAC,IAAI,0CAAE,MAAM,EAAE;gBACrB,OAAO;oBACL,IAAI,EAAE,IAAI,CAAC,IAAI;iBAChB,CAAC;aACH;YACD,OAAO,IAAI,CAAC,aAAa,CAAC,SAAS,CAAC,IAAI,CAAC,CAAA;SAC1C,CAAC;aACD,IAAI,CAAC,CAAC,GAAG;;YACR,IAAI,CAAC,OAAO,GAAG,GAAG,CAAC;YACnB,IAAI,CAAC,IAAI,GAAG,CAAA,MAAA,IAAI,CAAC,OAAO,0CAAE,IAAI,KAAI,EAAE,CAAC;YACrC,IAAI,CAAC,KAAK,GAAG,OAAO,CAAC;YACrB,OAAO,IAAI,CAAC,OAAO,CAAC;SACrB,CAAC,CAAA;KACH;IAEM,YAAY,CAAC,GAAQ,EAAE,KAAa;QACzC,IAAI,CAAC,IAAI,CAAC,IAAI,IAAI,KAAK,GAAG,CAAC,IAAI,KAAK,IAAI,IAAI,CAAC,IAAI,CAAC,MAAM,IAAI,CAAC,GAAG,EAAE;YAChE,OAAO,IAAI,CAAC;SACb;QACD,MAAM,OAAO,GAAG,IAAI,CAAC,WAAW,CAAC,cAAc,CAAC,GAAG,CAAC,SAAS,EAAE,MAAM,CAAC,CAAC;QACvE,IAAI,KAAK,KAAK,CAAC,EAAE;YACf,OAAO,OAAO,CAAC;SAChB;QACD,IAAI,IAAI,CAAC,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC,EAAE;YACxB,MAAM,QAAQ,GAAG,IAAI,CAAC,WAAW,CAAC,cAAc,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC,SAAS,EAAE,MAAM,CAAC,CAAA;YACxF,IAAI,QAAQ,KAAK,OAAO,EAAE;gBACxB,OAAO,IAAI,CAAC;aACb;iBAAM;gBACL,OAAO,OAAO,CAAC;aAChB;SACF;QACD,OAAO,IAAI,CAAC;KACb;IAEO,MAAM;QACZ,IAAI,CAAC,aAAa,CAAC,IAAI,EAAE,CAAC;KAC3B;IAEO,SAAS,CAAC,GAAG;QACnB,MAAM,GAAG,GAAG,GAAG,CAAC,MAAM,CAAC;QACvB,IAAI,IAAI,CAAC,IAAI,EAAE;YACb,MAAM,SAAS,GAAG,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,OAAO;gBAC5C,OAAO,OAAO,CAAC,KAAK,KAAK,GAAG,CAAC,KAAK,CAAC;aACpC,CAAC,CAAA;YACF,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC;YAC/B,IAAI,CAAC,IAAI,GAAG,EAAE,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;SAClC;KACF;IAGD,MAAM;;QACJ,QACE,EAAC,IAAI,uDACD,4DAAK,KAAK,EAAC,QAAQ,IACnB,uEAAgB,OAAO,EAAE,MAAM,IAAI,CAAC,MAAM,EAAE,EAAE,IAAI,EAAE,MAAA,IAAI,CAAC,SAAS,0CAAE,KAAK,EAAE,IAAI,EAAC,eAAe,yBAA+B,CAMxH,EACJ,IAAI,CAAC,KAAK,KAAI,OAAO,IAAI,IAAI,CAAC,UAAU,IAAI,IAAI,CAAC,UAAU,IAAG,IAAI,CAAC,SAAS,IAAI,IAAI,CAAC,OAAO;YAC5F,WAAK,KAAK,EAAC,MAAM,IACb,IAAI,CAAC,IAAI,CAAC,MAAM,GAAC,CAAC;gBAClB,WAAK,KAAK,EAAC,UAAU,IAAE,IAAI,CAAC,SAAS,CAAC,UAAU,CAAO;kBACrD,EAAE,EAEJ,IAAI,CAAC,IAAI,CAAC,MAAM;gBAChB,EAAC,QAAQ,QACP,WAAK,KAAK,EAAC,UAAU,IAAE,IAAI,CAAC,SAAS,CAAC,cAAc,CAAC,OAAO,CAAC,iBAAiB,EAAE,GAAG,IAAI,CAAC,gBAAgB,EAAE,CAAC,CAAO,EAClH,cACG,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,GAAG,EAAE,KAAK;oBACxB,OAAO,UAAI,GAAG,EAAE,KAAK,GAAG,GAAG,CAAC,KAAK,IAC7B,IAAI,CAAC,YAAY,CAAC,GAAG,EAAE,KAAK,CAAC,GAAG,SAAG,KAAK,EAAC,UAAU,IAAE,IAAI,CAAC,YAAY,CAAC,GAAG,EAAE,KAAK,CAAC,CAAK,GAAG,EAAE,EAC9F,iBAAW,GAAG,EAAE,GAAG,CAAC,KAAK,EAAE,GAAG,EAAE,GAAG,EAAE,YAAY,EAAE,CAAC,GAAG,KAAK,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,GAAc,CAC1F,CAAA;iBACN,CAAC,CACC,CACI,GAAG,EAAE,CAEd;;gBAEN,WAAK,KAAK,EAAC,SAAS,IAClB,sBAAgB,KAAK,EAAE,MAAA,IAAI,CAAC,UAAU,0CAAE,OAAO,GAAmB,CAC9D,EAKV,8DAAa,CACR,EACP;KACH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","names":[],"sources":["src/components/task-list/task-list.scss?tag=task-list&encapsulation=shadow","src/components/task-list/task-list.tsx"],"sourcesContent":[":host {\n  * {\n    -webkit-box-sizing: border-box;\n    -moz-box-sizing: border-box;\n    box-sizing: border-box;\n  }\n  $color-green-forest: #31872E;\n  $color-green-parsley: #206A1E;\n  $color-green-york: #99CA8F;\n  $color-green-tusk: #DFF7D0;\n  $color-green-moss: #B9DAA5;\n  $color-green-surf: #B8DCC6;\n  $color-green-edgewater: #B7DCC7;\n  $color-green-deYork: #7BC58F;\n  $color-green-shamrock: #3CC98D;\n  $color-green-smoke: #ABB27B;\n  $color-green-deco: #C9D479;\n  $color-green-sprout: #B9D9A5;\n  $color-green-parsley: #165A13;\n  $color-green-limeade: #6EA400;\n  $color-green-sushi: #72BC3A;\n  $color-white: #ffffff;\n  $color-white-ice:#DBF2F9;\n  $color-white-ice2:#E1F7FA;\n  $color-white-smoke:#F6F6F6;\n  $color-white-lilac:#E6EAF6;\n  $color-black: #000000;\n  $color-black-haze:#F7F8F8;\n  $color-shark:#2E2F30;\n  $color-jumbo:#838388;\n  $color-gray-emperor:#505050;\n  $color-gray-mine-shaft:#333333;\n  $color-gray-dove: #666666;\n  $color-gray-dusty: #999999;\n  $color-gray-alto: #CFCFCF;\n  $color-gray-iron: #F7F8F8;\n  $color-gray-gallery: #EEEEEE;\n  $color-gray-god: #161616;\n  $color-gray-mercury: #E8E8E8;\n  $color-gray-porcelain: #E6E8EA;\n  $color-gray-haze: #EDF0F0;\n  $color-gray-alabaster: #F9FAFA;\n  $color-gray-squeeze: #ECF4F8;\n  $color-gray-waterloo: #858590;\n  $color-gray-wildSand: #F4F4F4;\n  $color-gray-concrete: #F2F2F2;\n  $color-gray-athens:#EFF0F5;\n  $color-gray-french: #BABDC9;\n  $color-gray-selago: #F5F7FD;\n  $color-gray-dusty : #979797;\n  $color-blue-allPorts: #007D9F;\n  $color-blue-linkWater: #ADDEEC;\n  $color-blue-blizzardBlue: #add7f0;\n  $color-blue-eastern: #1C99BC;\n  $color-blue-Science: #0072DE;\n  $color-blue-spindle: #C8E5EF;\n  $color-blue-lochinvar: #2A8A91;\n  $color-blue-fountainBlue: #51B4BB;\n  $color-blue-halfBaked: #7FCACB;\n  $color-blue-breakerBay: #6CACAC;\n  $color-blue-iceberg: #E1F0F5;\n  $color-blue-jaggedIce:#C7E3EC;\n  $color-blue-havelock: #4A90E2;\n  $color-blue-Lochmara:#0079c1;\n  $color-blue-bahamaBlue: #005e95;\n  $color-blue-lilyWhite: #EAFAFF;\n  $color-blue-matisse:#14728D;\n  $color-red-flamePea: #D65940;\n  $color-red-potPourri: #F7EBE8;\n  $color-red-terracotta: #E06D56;\n  $color-red-falcon: #755465;\n  $color-red-wewak: #F59C9B;\n  $color-red-salmon: #FF7877;\n  $color-red-thunderbird: #BE3B20;\n  $color-orange-cashmere: #E4C0A3;\n  $color-orange-orangeRoughy: #CC5316;\n  $color-orange-fieryOrange: #A34211;\n  $color-orange-meteor: #BC7610;\n  $color-orange-flush: #FF8000;\n  $color-orange-tangelo: #F5A118;\n  $color-yellow-equator: #DFA95B;\n  $color-yellow-grandis: #FFD682;\n  $color-yellow-dixie: #E5A71C;\n  $color-yellow-butterCup: #F5A017;\n  $color-yellow-peachCream: #FFF1DD;\n  $color-yellow-lemon: #F8E71C;\n  $color-blue-cornflower :#66AFE9;\n  $color-cyan-water :#C9E6EF;\n  $font-weight7: 700;\n  * {\n    font-size: 14px;\n  }\n  display: block;\n  \n  .banner {\n    cursor: pointer;\n    // padding: 0 20px;\n    font-weight: $font-weight7;\n    line-height: 60px;\n\n    a {\n      cursor: pointer;\n      float: inline-start;\n      transform: rotateZ(180deg);\n      top: 16px;\n\n      // :host-context(html[dir='rtl']) & {\n      //     transform: none;\n      // }\n    }\n\n    span {\n      float: inline-start;\n      padding-left: 10px;\n\n      // :host-context(html[dir='rtl']) & {\n      //     padding-right: 10px;\n      //     padding-left: unset;\n      // }\n    }\n  } \n  .no-tasks {\n    // padding: 0 30px;\n    margin-bottom: 20px;\n  }\n  .list {\n    height: calc(100% - 60px);\n\n    padding: 0 0.75rem;\n    overflow: auto;\n    // padding: 0 20px;\n    width: 100%;\n    ul {\n      padding-left: 0;\n\n      // :host-context(html[dir='rtl']) & {\n      //     padding-right: 0;\n      //     padding-left: unset;\n      // }\n\n      li {\n          list-style: none;\n          margin-bottom: 15px;\n          border-radius: 2px;\n      }\n    }\n    p.job-date {\n        color: $color-gray-dusty;\n        line-height: 40px;\n        margin-bottom: 0;\n    }\n  }\n}\n\n:host-context([dir=\"rtl\"]) {\n  .banner {\n    a {\n      transform: none!important;\n    }\n    span {\n      padding-right: 10px;\n      padding-left: unset!important;\n    }\n  }\n  list ul{\n    padding-right: 0;\n    padding-left: unset!important;\n  }\n}","import { Component, Host, Event, Prop, EventEmitter, State,  h, Fragment } from '@stencil/core';\nimport { ReportService } from '../../services/report.service';\nimport { TranslateService } from '../../services/translate.service';\nimport { StateService } from '../../services/state.service';\nimport { UtilService } from '../../services/util.service';\n\n@Component({\n  tag: 'task-list',\n  styleUrl: 'task-list.scss',\n  shadow: true,\n})\nexport class ReportTaskList {\n  @Event() goBackClicked: EventEmitter;\n  @State() langReport: any;\n  @State() langCommon: any;\n  @State() langTasks: any;\n  @State() state: 'loading' | 'ready' = 'loading';\n  @Prop() jobs: any[];\n  public recentTasksCount: number = 10;\n  private jobList: any;\n  private reportService: ReportService = ReportService.getService();\n  private stateService: StateService = StateService.getService();\n  private utilService: UtilService = UtilService.getService();\n\n  componentWillLoad() {\n    this.state = 'loading';\n    Promise.resolve(true)\n    // .then(() => {\n    //   return TranslateService.getService().getTranslate();\n    // })\n    .then(() => {\n      const res = TranslateService.getService().getTranslateSync();\n      this.langReport = res?.customPrint;\n      this.langCommon = res?.common;\n      this.langTasks = res?.customPrint.recentTasks;\n      this.stateService.subscribe('locale-data-changed', (data) => {\n        this.langReport = data?.customPrint;\n        this.langCommon = data?.common;\n        this.langTasks = data?.customPrint.recentTasks;\n      });\n      if (this.jobs?.length) {\n        return {\n          jobs: this.jobs\n        };\n      }\n      return this.reportService.queryJobs(true)\n    })\n    .then((res) => {\n      this.jobList = res;\n      this.jobs = this.jobList?.jobs || [];\n      this.state = 'ready';\n      return this.jobList;\n    })\n  }\n\n  public jobSplitDate(job: any, index: number) {\n    if (!this.jobs || index < 0 || index >= this.jobs.length || !job) {\n      return null;\n    }\n    const curDate = this.utilService.formatDateTime(job.submitted, 'date');\n    if (index === 0) {\n      return curDate;\n    }\n    if (this.jobs[index - 1]) {\n      const lastDate = this.utilService.formatDateTime(this.jobs[index - 1].submitted, 'date')\n      if (lastDate === curDate) {\n        return null;\n      } else {\n        return curDate;\n      }\n    }\n    return null;\n  }\n\n  private goBack() {\n    this.goBackClicked.emit();\n  }\n\n  private removeJob(evt) {\n    const job = evt.detail;\n    if (this.jobs) {\n      const targetIdx = this.jobs.findIndex((jobItem) => {\n        return jobItem.jobId === job.jobId;\n      })\n      this.jobs.splice(targetIdx, 1);\n      this.jobs = [].concat(this.jobs);\n    }\n  }\n\n\n  render() {\n    return (\n      <Host>        \n          <div class=\"banner\">\n          <calcite-action onClick={() => this.goBack()} text={this.langTasks?.label} icon=\"chevrons-left\" text-enabled></calcite-action>\n\n            {/* <calcite-link onClick={() => this.goBack()}>\n              <calcite-icon icon=\"chevrons-left\" text-label={this.langTasks?.label}></calcite-icon>\n                {this.langTasks?.label}\n            </calcite-link> */}\n          </div>\n          { this.state ==='ready' && this.langReport && this.langCommon&& this.langTasks && this.jobList ?           \n            <div class=\"list\">\n              { this.jobs.length<1 ? \n                <div class=\"no-tasks\">{this.langTasks.noTaskDesc}</div> \n                : ''\n              }\n              { this.jobs.length ? \n                <Fragment>\n                  <div class=\"no-tasks\">{this.langTasks.limitationDesc.replace('${$maxJobCount}', `${this.recentTasksCount}`)}</div>\n                  <ul>\n                    {this.jobs.map((job, index) => {\n                      return <li key={'li_' + job.jobId}>\n                        { this.jobSplitDate(job, index) ? <p class=\"job-date\">{this.jobSplitDate(job, index)}</p> : ''}\n                        <task-info key={job.jobId} job={job} onJobRemoved={(evt) => this.removeJob(evt)}></task-info>\n                      </li>\n                    })}\n                  </ul>\n                </Fragment> : ''\n            }\n            </div>\n            :\n            <div class=\"loading\">\n              <calcite-loader label={this.langCommon?.loading}></calcite-loader>\n            </div> \n          }\n\n          \n                \n        <slot></slot>\n      </Host>\n    );\n  }\n\n}\n"],"version":3}