{"file":"translate.service-72bb6f5d.js","mappings":"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","names":[],"sources":["src/services/props.service.ts","src/services/translate.service.ts"],"sourcesContent":["/**\n * This class aims to store the shared props\n */\nexport class PropsService {\n  \n  /**\n   * report parameters\n   * all the paraemters are listed in: https://devtopia.esri.com/Beijing-R-D-Center/feature-report/issues/505#issuecomment-4495107\n   */\n\n  // token, required\n  static token: string;\n\n  static portalUrl?: string;\n\n  static apiUrl?: string;\n\n  // Feature layer or table URL. required\n  static featureLayerUrl: string;\n\n  static surveyItemId?: string;\n\n  static templateItemId?: string;\n\n  static queryParameters: string;  // Object string\n  \n  static mergeFiles: 'none' | 'nextPage' | 'continuous';\n\n  static outputFormat: string;\n  \n  static outputReportName: string;\n  \n  static outputPackageName: string;\n  \n  static packageFiles: boolean | string;\n  \n  static uploadInfo: string;   // Object string\n  \n  static webmapItemId: string;\n  \n  static mapScale: string;\n\n  static locale?: string;\n\n  static utcOffset?: string;\n\n  static reportTemplateIds?: string;\n\n  static clientId?: string;\n\n  static requestSource: string;\n\n\n  /**\n   * the following parameters are geneareted by the main parameters, ie:\n   * the where is genereated from queryParameters\n   * the username is generated from token \n   */\n  static where: string;\n\n  static username?: string;\n\n  /**\n   * ui parameters\n   */\n  static show: string;\n\n  static hide: string;\n\n  static inputFeatureTemplate: string;\n\n  static label: string;\n\n  // /**\n  //  * @internal\n  //  * @param metadata \n  //  */\n  // constructor(metadata?: any) {\n  //   const defaultValue = {\n  //     url: 'https://survey123.arcgis.com/api/featureReport',\n  //     itemId: null,\n  //     token: null,\n  //     portalUrl: 'https://www.arcgis.com',\n  //     f: 'json'\n  //   };\n\n  //   Object.assign(this, defaultValue, metadata || {});\n  // }\n\n  static paramesWhitelist: string[] = ['token', 'portalUrl', 'apiUrl', 'featureLayerUrl', 'surveyItemId', \n  'templateItemId', 'queryParameters', 'mergeFiles', 'outputFormat', 'outputReportName', \n  'outputPackageName', 'packageFiles', 'uploadInfo', 'webmapItemId', 'mapScale', \n  'locale', 'utcOffset', 'where', 'username', 'show', 'hide', 'inputFeatureTemplate', 'label', 'reportTemplateIds', 'clientId', 'requestSource'];\n  /**\n   * set props\n   * @param obj \n   */\n  static setProps(obj) {\n    const whitelist = PropsService.paramesWhitelist;\n\n    let env = '';\n    const pattern = /survey123(.*?).arcgis.com/;\n    const match = window.location.hostname.match(pattern);\n    if (match && match[1]) {\n      if (['dev', 'qa', 'beta'].includes(match[1])) {\n        env = match[1];\n      }\n    }\n\n    const defaultLocale = this.getLocale();\n    const defaultValue = {\n      apiUrl: `https://survey123${env}.arcgis.com/api/featureReport`,\n      itemId: null,\n      token: null,\n      outputFormat: 'docx',\n      portalUrl: 'https://www.arcgis.com',\n      locale: defaultLocale,\n      f: 'json'\n    };\n\n    if (typeof obj === 'object') {\n      for (let key in obj) {\n        if (whitelist.indexOf(key) >= 0) {\n          PropsService[key] = obj[key] || defaultValue[key] || obj[key];\n          if (key === 'locale' && obj[key]) {\n            PropsService[key] = this.convertToSupportedLang(obj[key]);\n          }\n        }\n      }\n      // Object.assign(this, obj || {});\n    }\n\n    if (PropsService.outputFormat !== 'docx' && PropsService.outputFormat !== 'pdf') {\n      PropsService.outputFormat = 'docx';\n    }\n  }\n\n  /**\n   * get locale\n   * @returns \n   */\n  static getLocale(options?: {\n    userDefinedLocale?: string;\n    userInfo?: any;\n    portalInfo?: any;\n  }) {\n    options = Object.assign({\n\n    }, options || {});\n\n    let userInfo = options.userInfo || {};\n    let portalInfo = options.portalInfo || {};\n\n    const browerLocale =  navigator.language || (navigator as any).userLanguage;\n\n    // https://devtopia.esri.com/Beijing-R-D-Center/survey123-webform/issues/857\n    return this.convertToSupportedLang(options.userDefinedLocale)  ||\n      this.convertToSupportedLang(userInfo.culture) ||\n      this.convertToSupportedLang(portalInfo.culture) ||\n      this.convertToSupportedLang(browerLocale) || 'en';\n  }\n\n  /**\n  * convert the provided language code to the supported language code\n  * @param lang \n  */\n   static convertToSupportedLang(lang) {\n      const supportLangs: string[] = [\n        \"ar\",\n        \"bg\",\n        \"bs\",\n        \"ca\",\n        \"cs\",\n        \"da\",\n        \"de\",\n        \"el\",\n        \"en\",\n        \"es\",\n        \"et\",\n        \"fi\",\n        \"fr\",\n        \"he\",\n        \"hr\",\n        \"hu\",\n        \"id\",\n        \"it\",\n        \"ja\",\n        \"ko\",\n        \"lt\",\n        \"lv\",\n        \"nb\",\n        \"nl\",\n        \"pl\",\n        \"pt-br\",\n        \"pt-pt\",\n        \"ro\",\n        \"ru\",\n        \"sk\",\n        \"sl\",\n        \"sr\",\n        \"sv\",\n        \"th\",\n        \"tr\",\n        \"uk\",\n        \"vi\",\n        \"zh-cn\",\n        \"zh-hk\",\n        \"zh-tw\"\n      ];\n      const supportSubLocales = [\n        \"en-US\",\n        \"en-GB\",\n        \"en-AU\",\n        \"en-CA\",\n        \"es-ES\",\n        \"es-MX\",\n        \"it-CH\",\n        \"de-CH\",\n        \"de-AT\",\n        \"fr-CH\"\n      ];\n   lang = lang || '';\n   lang = (lang + '').toLowerCase();\n \n   const isSupportLangs = supportLangs.find((e) => {\n     return e.toLowerCase() === lang || e.toLowerCase() === lang.split('-')[0] || e.toLowerCase().split('-')[0] === lang;\n   });\n \n   const isSupportSubLocale = supportSubLocales.find((e) => {\n     return e.toLowerCase() === lang;\n   });\n   return isSupportSubLocale || isSupportLangs;\n }\n}","\nimport { PropsService } from './props.service';\nimport { getAssetPath } from '@stencil/core';\n\nconst defaultLocale = \"en\";\n\nexport const t9nLocales = [\n  \"ar\",\n  \"bg\",\n  \"bs\",\n  \"ca\",\n  \"cs\",\n  \"da\",\n  \"de\",\n  \"el\",\n  defaultLocale,\n  \"es\",\n  \"et\",\n  \"fi\",\n  \"fr\",\n  \"he\",\n  \"hr\",\n  \"hu\",\n  \"id\",\n  \"it\",\n  \"ja\",\n  \"ko\",\n  \"lt\",\n  \"lv\",\n  \"no\",\n  \"nl\",\n  \"pl\",\n  \"pt-br\",\n  \"pt-pt\",\n  \"ro\",\n  \"ru\",\n  \"sk\",\n  \"sl\",\n  \"sr\",\n  \"sv\",\n  \"th\",\n  \"tr\",\n  \"uk\",\n  \"vi\",\n  \"zh-cn\",\n  \"zh-hk\",\n  \"zh-tw\",\n];\n\nexport const locales = [\n  \"ar\",\n  \"bg\",\n  \"bs\",\n  \"ca\",\n  \"cs\",\n  \"da\",\n  \"de\",\n  \"de-at\",\n  \"de-ch\",\n  \"el\",\n  defaultLocale,\n  \"en-au\",\n  \"en-ca\",\n  \"en-gb\",\n  \"es\",\n  \"es-mx\",\n  \"et\",\n  \"fi\",\n  \"fr\",\n  \"fr-ch\",\n  \"he\",\n  \"hi\",\n  \"hr\",\n  \"hu\",\n  \"id\",\n  \"it\",\n  \"it-ch\",\n  \"ja\",\n  \"ko\",\n  \"lt\",\n  \"lv\",\n  \"mk\",\n  \"no\",\n  \"nl\",\n  \"pl\",\n  \"pt\",\n  \"pt-pt\",\n  \"ro\",\n  \"ru\",\n  \"sk\",\n  \"sl\",\n  \"sr\",\n  \"sv\",\n  \"th\",\n  \"tr\",\n  \"uk\",\n  \"vi\",\n  \"zh-cn\",\n  \"zh-hk\",\n  \"zh-tw\",\n];\nexport const supportedLocales = [...new Set([...t9nLocales, ...locales])] as const;\nexport type SupportedLocale = (typeof supportedLocales)[number];\n\n\nexport class TranslateService {\n  public static service: TranslateService;\n  public static currentLangObj: any;\n  public cache: any;\n\n\n  /**\n   * get Service\n   * @returns \n   */\n  static getService(): TranslateService {\n    if (!this.service) {\n      this.service = new TranslateService();\n    }\n    return this.service;\n  }\n\n  /**\n   * get tranlate json\n   * @param locale \n   * @returns \n   */\n  public getTranslate() {\n    const lang = this.getSupportedLocale(PropsService.locale || 'en');\n\n    return Promise.resolve(true)\n    .then(() => {\n      \n      // read the cache\n      if (this.cache && this.cache[lang]) {\n        try {\n          return JSON.parse(this.cache[lang]);\n        } catch {\n          return null;\n        }\n      }\n    })\n    .then((res) => {\n      if (res) {\n        return res;\n      }\n      return fetch(getAssetPath(`./assets/i18n/${lang}.json`))\n      .then((resp) => {\n        if (!resp.ok) {\n          throw new Error(\"could not fetch the translate json file\");\n        }\n        return resp.json();\n      })\n    })\n    .then((res) => {\n      // save the cache\n      if (res) {\n        this.cache = this.cache || {};\n        if (!this.cache[lang]) {\n          try {\n            this.cache[lang] = JSON.stringify(res);\n          } catch {\n            //\n          }\n        }\n        // override the default string if the 'label' prop existing\n        if (PropsService.label) {\n          const keyMapping = {\n            inputFeatures: 'inputFeatures',\n            selectTemplate: 'chooseTemplateLabel1',\n            reportSetting: 'resultSettingsLabel1',\n            fileOptions: 'outputMode',\n            reportName: 'saveToAGOItemName',\n            saveToAGSAccount: 'saveToAGOFolder',\n            outputFormat: 'outputFormat',\n            showCredits: 'creditsEstimate',\n            generateReport: 'generate',\n            previewMode: 'previewReport'\n          };\n\n          const labelsObj = JSON.parse(PropsService.label);\n          Object.keys(labelsObj).forEach((key) => {\n            const str = labelsObj[key];\n            if (key === 'recentReports') {\n              res.customPrint.recentTasks.label = str;\n            }\n            const strkey = keyMapping[key];\n            if (['inputFeatures', 'selectTemplate', 'reportSetting', 'fileOptions', 'reportName', 'saveToAGSAccount', 'outputFormat', 'showCredits', 'generateReport', 'previewReport'].indexOf(key) >=0 ) {\n              res.customPrint[strkey] = str;\n            }\n          })\n          \n        }\n        TranslateService.currentLangObj = res;\n      }\n      return res;\n    })\n    .catch((res) => { throw new Error(res)});\n  }\n\n  /**\n   * get translate sync\n   */\n  \n  public getTranslateSync() {\n    return TranslateService.currentLangObj;\n  }\n\n\n/**\n * Gets the locale that best matches the context.\n *\n * @param locale â€“ the BCP 47 locale code\n * @param context - specifies whether the locale code should match in the context of CLDR or T9N (translation)\n */\npublic getSupportedLocale(locale: string): SupportedLocale {\n  const contextualLocales = t9nLocales; // = context === \"cldr\" ? locales : t9nLocales;\n\n  if (!locale) {\n    return defaultLocale;\n  }\n\n  if (contextualLocales.includes(locale)) {\n    return locale;\n  }\n\n  locale = locale.toLowerCase();\n\n  // we support both 'nb' and 'no' (BCP 47) for Norwegian but only `no` has corresponding bundle\n  if (locale === \"nb\") {\n    return \"no\";\n  }\n\n  // we use `pt-BR` as it will have the same translations as `pt`, which has no corresponding bundle\n  if (locale === \"pt\") {\n    return \"pt-br\";\n  }\n\n  if (locale.includes(\"-\")) {\n    locale = locale.replace(/(\\w+)-(\\w+)/, (_match, language, region) => `${language}-${region.toUpperCase()}`);\n\n    if (!contextualLocales.includes(locale)) {\n      locale = locale.split(\"-\")[0];\n    }\n  }\n\n  // we can `zh-CN` as base translation for chinese locales which has no corresponding bundle.\n  if (locale === \"zh\") {\n    return \"zh-cn\";\n  }\n\n  if (!contextualLocales.includes(locale)) {\n    console.warn(\n      `Translations for the \"${locale}\" locale are not available and will fall back to the default, English (en).`\n    );\n    return defaultLocale;\n  }\n\n  return locale;\n}\n\n}\n"],"version":3}